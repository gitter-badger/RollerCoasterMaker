<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Roller Coaster Maker</title>
    <link href="css/site.css" rel="stylesheet" />
    <link rel="shortcut icon" href="/assets/images/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="preload" as="image" href="/assets/images/splashscreenimage.png" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="preload" as="script" href="/_framework/wasm/_framework/wasm/mono.js" />
    <link rel="preload" as="script" href="/_framework/wasm/mono.wasm" />
    <link rel="preload" as="script" href="/_framework/_bin/_framework/_bin/Microsoft.Extensions.DependencyInjection.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/mscorlib.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/System.Core.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/RCLibrary.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/RCWeb.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/netstandard.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/Microsoft.Extensions.DependencyInjection.Abstractions.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/Microsoft.AspNetCore.Blazor.Browser.dll" />

    <link rel="preload" as="script" href="/_framework/_bin/System.Net.Http.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/Microsoft.AspNetCore.Blazor.dll" />
    <link rel="preload" as="script" href="/_framework/_bin/System.dll" />
    <link rel="preload" as="script" href="/assets/layout.json" />

</head>
<body>
    <app>
    </app>
    <div class="preloader-wrap">
        <div class="loading"></div>
        <div class="percentage" id="precent"></div>
        <div class="loader">

            <div class="trackbar">
                <div class="loadbar"></div>
            </div>
            <div class="glow"></div>
            <center><h3 id="loadingText">Downloading Files</h3></center>
        </div>
    </div>
    <script type="blazor-boot">
    </script>
    <script src="js/three.min.js"></script>
    <script src="js/threex.windowresize.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/main.js"></script>
    <script>
        let BlazorPageLoaded = false;
        $(document).ready(function () {
  
            var width = 50,
                perfData = window.performance.timing, // The PerformanceTiming interface represents timing-related performance information for the given page.
                EstimatedTime = -(perfData.loadEventEnd - perfData.navigationStart),
                time = parseInt((EstimatedTime / 1000) % 60);

            // Loadbar Animation
            $(".loadbar").animate({
                width: width + "%"
            }, time);

            // Loadbar Glow Animation
            $(".glow").animate({
                width: width + "%"
            }, time);

            // Percentage Increment Animation
            var PercentageID = $("#precent"),
                start = 0,
                end = 100,
                durataion = time;
            animateValue(PercentageID, start, end, durataion);

            function animateValue(id, start, end, duration) {

                var range = end - start,
                    current = start;
                    increment = end > start ? 1 : -1;
                    stepTime = Math.abs(Math.floor(duration / range)),
                    obj = $(id);

                var timer = setInterval(function () {
                    current += increment;

                    if (current == end) {
                        clearInterval(timer);
                    }
                }, stepTime);
            }

            document.getElementById("loadingText").textContent = "Loading Game";
        });
    </script>
    <script>
        Blazor.registerFunction('ContentPackage.Loaded', function (data) {
            BlazorPageLoaded = true;
            document.getElementById("loadingText").textContent = "Done";
            $(".loadbar").animate({
                width: 100 + "%"
            }, .2);
            // Fading Out Loadbar on Finised
           $('.preloader-wrap').fadeOut(300);

            console.log(data);
        });
        Blazor.registerFunction('ContentPackage.CoasterUpdate', function (data) {
            CoasterUpdate(data);
            console.log(data);
        });
    </script>
    <link rel="preload" as="image" href="/assets/images/stright64.png" />
    <link rel="preload" as="image" href="/assets/images/left64.png" />
    <link rel="preload" as="image" href="/assets/images/right64.png" />
    <link rel="preload" as="image" href="/assets/images/up64.png" />
    <link rel="preload" as="image" href="/assets/images/down64.png" />
    <link rel="preload" as="image" href="/assets/images/back64.png" />
</body>
</html>
